{namespace ex=Fixpunkt\Backendtools\ViewHelpers}
<html
        xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers"
        xmlns:core="http://typo3.org/ns/TYPO3/CMS/Core/ViewHelpers"
        data-namespace-typo3-fluid="true">
<f:layout name="Module"/>
<f:section name="Content">
    <f:asset.css identifier="backendtools" href="EXT:backendtools/Resources/Public/Css/Backend.css"/>
    <h1>{f:translate(key: 'title.links')}</h1>
    <f:flashMessages/>
    <f:form action="pagesearch" class="form-inline">
        <p>{f:translate(key: 'search_element')}</p>
        <div class="row">
            <div class="col-md-6">
                <div style="margin: 10px 0;"><f:translate key="show" />
                    <label class="checkbox-inline">
                        <f:form.radio name="my_p" value="0" checked="{my_p} == 0" />
                        <f:translate key="all" /> &nbsp;
                        <f:translate key="or" />
                    </label>
                    <label class="checkbox-inline">
                        <f:form.radio name="my_p" value="1" checked="{my_p} == 1" />
                        <f:translate key="option.not_visible" />&nbsp;
                        <f:translate key="or" />
                    </label>
                    <label class="checkbox-inline">
                        <f:form.radio name="my_p" value="2" checked="{my_p} == 2" />
                        <f:translate key="option.visible" /> ...
                        <f:translate key="pages" />
                    </label>
                </div>
                <div style="margin: 10px 0;"><f:translate key="show" />
                    <label class="checkbox-inline">
                        <f:form.radio name="my_c" value="0" checked="{my_c} == 0" />
                        <f:translate key="all" /> &nbsp;
                        <f:translate key="or" />
                    </label>
                    <label class="checkbox-inline">
                        <f:form.radio name="my_c" value="1" checked="{my_c} == 1" />
                        <f:translate key="option.not_visible" />&nbsp;
                        <f:translate key="or" />
                    </label>
                    <label class="checkbox-inline">
                        <f:form.radio name="my_c" value="2" checked="{my_c} == 2" />
                        <f:translate key="option.visible" /> ...
                        <f:translate key="content_elements" />
                    </label>
                </div>
                <div style="margin: 10px 0;"><f:translate key="tx_backendtools_domain_model_session.pagestart" />:
                    <f:form.textfield name="my_recursive" value="{my_recursive}" size="5" /> &nbsp;
                </div>
            </div>
            <div class="col-md-6">

                <div style="margin: 10px 0;"><f:translate key="option.target" />:
                    <f:form.textfield name="linksto" value="{linksto}" size="5"/><br>
                    <label class="checkbox-inline">
                        <f:form.checkbox name="exttoo" value="1" checked="{exttoo} == 1"/>
                        <f:translate key="option.extensions" />
                    </label>
                </div>
                <div style="margin: 10px 0;"><f:translate key="tx_backendtools_domain_model_session.pageel" />:
                    <f:form.textfield name="my_page" value="{my_page}" size="5"/> &nbsp;
                </div>

            </div>
        </div>

        <f:form.submit value="{f:translate(key: 'search')}" name="search" class="btn btn-default"/>
    </f:form>
    <div>&nbsp;</div>

    <f:if condition="{pages -> f:count()} > 0">
        <f:then>
            <f:if condition="{settings.pagebrowser.insertAbove} && ({paginator.numberOfPages} > 1)">
                <f:render partial="Paginator" arguments="{_all}"/>
            </f:if>
            <table class="table">
                <thead>
                <tr>
                    <th colspan="5" style="text-align:center;background-color:#cfc;color:#000;"><f:translate key="content_elements" /></th>
                    <th colspan="4" style="text-align:center;background-color:#ccf;color:#000;"><f:translate key="pages" /></th>
                </tr>
                <tr>
                    <th>uid</th>
                    <th>lang.</th>
                    <th>colPos</th>
                    <th>deleted / hidden</th>
                    <th>header</th>
                    <th>uid</th>
                    <th>deleted / hidden</th>
                    <th>title</th>
                </tr>
                </thead>
                <tbody>
                <f:for each="{paginator.paginatedItems}" as="page" iteration="iterator">
                    <tr {f:if(condition:iterator.isOdd, then: ' style="background-color:#fff;"')}>
                    <td>
                        <ex:editLink action="edit" table="tt_content" uid="{page.uid}"
                                     returnUrl="mod.php?M=tools_BackendtoolsMod1&tx_backendtools_tools_backendtoolsmod1[action]=pagesearch">
                            <core:icon identifier="actions-open" size="small"/>
                        </ex:editLink>
                        {page.uid}
                    </td>
                    <td>{page.sys_language_uid}</td>
                    <td>{page.colPos}</td>
                    <td>
                        <f:if condition="{page.ttdeleted} == 1">
                            <f:then><span style="color:#bb0000;font-weight:bold;">{f:translate(key: 'yes')}</span></f:then>
                            <f:else>{f:translate(key: 'no')}</f:else>
                        </f:if>
                        /
                        <f:if condition="{page.tthidden} == 1">
                            <f:then><span style="color:#bb0000;font-weight:bold;">{f:translate(key: 'yes')}</span></f:then>
                            <f:else>{f:translate(key: 'no')}</f:else>
                        </f:if>
                    </td>
                    <td>{page.header}</td>
                    <td>
                        <ex:editLink action="edit" table="pages" uid="{page.pl10n}" language="{page.sys_language_uid}"
                                     returnUrl="mod.php?M=tools_BackendtoolsMod1&tx_backendtools_tools_backendtoolsmod1[action]=pagesearch">
                            <core:icon identifier="actions-open" size="small"/>
                        </ex:editLink>
                        <a href="{page.domain}/index.php?id={page.pid}&no_cache=1" target="extern">
                            <core:icon identifier="actions-document-view" size="small"/>
                        </a>
                        {page.pid}
                    </td>
                    <td>
                        <f:if condition="{page.pdeleted} == 1">
                            <f:then><span style="color:#bb0000;font-weight:bold;">{f:translate(key: 'yes')}</span></f:then>
                            <f:else>{f:translate(key: 'no')}</f:else>
                        </f:if>
                        /
                        <f:if condition="{page.phidden} == 1">
                            <f:then><span style="color:#bb0000;font-weight:bold;">{f:translate(key: 'yes')}</span></f:then>
                            <f:else>{f:translate(key: 'no')}</f:else>
                        </f:if>
                    </td>
                    <td><a href="{page.domain}{page.slug}#c{page.uid}" target="extern">{page.title}</a></td>
                    </tr>
                </f:for>
                </tbody>
            </table>
            <f:if condition="{settings.pagebrowser.insertBelow} && ({paginator.numberOfPages} > 1)">
                <f:render partial="Paginator" arguments="{_all}"/>
                <p>Element {pagination.startRecordNumber} - {pagination.endRecordNumber}.</p>
            </f:if>
            <p>{pages -> f:count()} <f:translate key="elements_found" /></p>
        </f:then>
        <f:else>
            <p>0 <f:translate key="elements_found" /></p>
        </f:else>
    </f:if>

    <f:if condition="{exttoo} == 1">
        <f:if condition="{news -> f:count()} > 0">
            <f:then>
                <br>
                <table class="table">
                    <thead>
                    <tr>
                        <th colspan="5" style="text-align:center;background-color:#fcc;">news</th>
                    </tr>
                    <tr>
                        <th>pid</th>
                        <th>uid</th>
                        <th>lang.</th>
                        <th>deleted / hidden</th>
                        <th>title</th>
                    </tr>
                    </thead>
                    <tbody>
                    <f:for each="{news}" as="page" iteration="iterator">
                        <tr {f:if(condition:iterator.isOdd, then: ' style="background-color:#fff;"')}>
                        <td>{page.pid}</td>
                        <td>{page.uid}</td>
                        <td>{page.sys_language_uid}</td>
                        <td>
                            <f:if condition="{page.deleted} == 1">
                                <f:then><span style="color:#bb0000;font-weight:bold;">{f:translate(key: 'yes')}</span></f:then>
                                <f:else>{f:translate(key: 'no')}</f:else>
                            </f:if>
                            /
                            <f:if condition="{page.hidden} == 1">
                                <f:then><span style="color:#bb0000;font-weight:bold;">{f:translate(key: 'yes')}</span></f:then>
                                <f:else>{f:translate(key: 'no')}</f:else>
                            </f:if>
                        </td>
                        <td>{page.title}</td>
                        </tr>
                    </f:for>
                    </tbody>
                </table>
                <p>{news -> f:count()} <f:translate key="news_entries" /></p>
            </f:then>
            <f:else>
                <p>0 <f:translate key="news_entries" /></p>
            </f:else>
        </f:if>

        <f:if condition="{camaliga -> f:count()} > 0">
            <f:then>
                <br>
                <table class="table">
                    <thead>
                    <tr>
                        <th colspan="5" style="text-align:center;background-color:#fcc;">camaliga</th>
                    </tr>
                    <tr>
                        <th>pid</th>
                        <th>uid</th>
                        <th>lang.</th>
                        <th>deleted / hidden</th>
                        <th>title</th>
                    </tr>
                    </thead>
                    <tbody>
                    <f:for each="{camaliga}" as="page" iteration="iterator">
                        <tr {f:if(condition:iterator.isOdd, then: ' style="background-color:#fff;"')}>
                        <td>{page.pid}</td>
                        <td>{page.uid}</td>
                        <td>{page.sys_language_uid}</td>
                        <td>
                            <f:if condition="{page.deleted} == 1">
                                <f:then><span style="color:#bb0000;font-weight:bold;">{f:translate(key: 'yes')}</span></f:then>
                                <f:else>{f:translate(key: 'no')}</f:else>
                            </f:if>
                            /
                            <f:if condition="{page.hidden} == 1">
                                <f:then><span style="color:#bb0000;font-weight:bold;">{f:translate(key: 'yes')}</span></f:then>
                                <f:else>{f:translate(key: 'no')}</f:else>
                            </f:if>
                        </td>
                        <td>{page.title}</td>
                        </tr>
                    </f:for>
                    </tbody>
                </table>
                <p>{camaliga -> f:count()} <f:translate key="camaliga_entries" /></p>
            </f:then>
            <f:else>
                <p>0 <f:translate key="camaliga_entries" /></p>
            </f:else>
        </f:if>
    </f:if>
</f:section>
</html>
